# CityGaussiané¡¹ç›®åˆ†æ

## ğŸ“Š é¡¹ç›®æ¦‚è¿°

### åŸºæœ¬ä¿¡æ¯

| é¡¹ç›® | CityGaussian |
|------|-------------|
| **ç‰ˆæœ¬** | V1 (ECCV 2024) + V2 (ICLR 2025) |
| **ç›®æ ‡** | å¤§è§„æ¨¡åœºæ™¯çš„å®æ—¶æ¸²æŸ“ä¸é‡å»º |
| **ç‰¹ç‚¹** | å¤šGPUå¹¶è¡Œã€å‡ ä½•ç²¾ç¡®é‡å»º |
| **é¢„è®­ç»ƒæ¨¡å‹** | âœ… æœ‰ï¼ˆHugging Face + ç™¾åº¦ç½‘ç›˜ï¼‰ |

### æ ¸å¿ƒåŠŸèƒ½

1. **å¤šGPUå¹¶è¡Œé‡å»º** - å¯æ§åˆ¶å†…å­˜æˆæœ¬
2. **2DGSé£æ ¼ç½‘æ ¼æå–** - å‡ ä½•æ€§èƒ½è¯„ä¼°
3. **è½¨è¿¹å¯¹é½æ¸²æŸ“** - è§†é¢‘ç”Ÿæˆ
4. **è”åˆä½å§¿ä¼˜åŒ–** - 3DGSä¼˜åŒ–

---

## ğŸ” ä¸LightGaussianå¯¹æ¯”

| ç‰¹æ€§ | LightGaussian | CityGaussian |
|------|--------------|--------------|
| **ç›®æ ‡** | æ¨¡å‹å‹ç¼© | å¤§è§„æ¨¡åœºæ™¯é‡å»º |
| **å‹ç¼©ç‡** | 15å€ | æœªæ˜ç¡® |
| **é€‚ç”¨åœºæ™¯** | å•åœºæ™¯å‹ç¼© | åŸå¸‚çº§å¤§åœºæ™¯ |
| **å¤šGPU** | å¦ | æ˜¯ |
| **é¢„è®­ç»ƒæ¨¡å‹** | 1ä¸ªç¤ºä¾‹ | å¤šä¸ªæ•°æ®é›† |
| **ç‹¬ç«‹å‹ç¼©å·¥å…·** | å¦ | å¦ |

---

## âŒ ä¸é€‚åˆæˆ‘ä»¬çš„åœºæ™¯

### åŸå› åˆ†æ

**CityGaussiançš„è®¾è®¡ç›®æ ‡**ï¼š
```
å¤§é‡å¤šè§†è§’å›¾ç‰‡ â†’ å¤šGPUå¹¶è¡Œè®­ç»ƒ â†’ åŸå¸‚çº§3DGSé‡å»º
```

**æˆ‘ä»¬çš„åœºæ™¯**ï¼š
```
å•å¼ å›¾ç‰‡ â†’ SHARPæ¨ç† â†’ å°è§„æ¨¡3DGSï¼ˆ1.18Mç‚¹ï¼‰
```

### å…·ä½“ä¸åŒ¹é…ç‚¹

| éœ€æ±‚ | CityGaussian | æˆ‘ä»¬çš„æƒ…å†µ | åŒ¹é… |
|------|-------------|-----------|------|
| **è¾“å…¥** | å¤šè§†è§’å›¾ç‰‡åºåˆ— | å•å¼ å›¾ç‰‡ | âŒ |
| **è§„æ¨¡** | åŸå¸‚çº§ï¼ˆ5-8Mç‚¹ï¼‰ | å°è§„æ¨¡ï¼ˆ1.18Mç‚¹ï¼‰ | âŒ |
| **GPU** | å¤šGPUå¹¶è¡Œ | å•GPU | âŒ |
| **æµç¨‹** | å®Œæ•´è®­ç»ƒ | ç›´æ¥æ¨ç† | âŒ |
| **ç›®æ ‡** | é‡å»º | å‹ç¼©/ä¼˜åŒ– | âŒ |

### ç»“è®º

**CityGaussianæ˜¯é‡å»ºå·¥å…·ï¼Œä¸æ˜¯å‹ç¼©å·¥å…·**

- å®ƒä¸“æ³¨äºå¦‚ä½•ä»å¤§é‡å›¾ç‰‡é‡å»ºå¤§è§„æ¨¡åœºæ™¯
- ä¸æä¾›ç‹¬ç«‹çš„PLYå‹ç¼©åŠŸèƒ½
- å¯¹æˆ‘ä»¬çš„å•å›¾ç”Ÿæˆåœºæ™¯**è¿‡åº¦è®¾è®¡**

---

## ğŸ’¡ å¯å€Ÿé‰´çš„æŠ€æœ¯

### 1. prune_ratioå‚æ•°

**ä½œç”¨**: æ§åˆ¶å‰ªææ¯”ä¾‹ï¼Œé™ä½å†…å­˜æ¶ˆè€—

**å€Ÿé‰´**: æˆ‘ä»¬å¯ä»¥å®ç°ç±»ä¼¼çš„å‰ªæå‚æ•°
```python
def prune_gaussians(gaussians, prune_ratio=0.3):
    # æŒ‰é‡è¦æ€§æ’åºï¼Œç§»é™¤æœ€ä½çš„30%
    ...
```

### 2. å†…å­˜ä¼˜åŒ–ç­–ç•¥

**CityGaussiançš„æ–¹æ³•**:
- é™é‡‡æ ·å›¾åƒ
- è°ƒæ•´ç¼“å­˜æ•°é‡
- å¢åŠ å‰ªææ¯”ä¾‹

**æˆ‘ä»¬å¯ä»¥å€Ÿé‰´**:
- åœ¨æœåŠ¡å™¨ç«¯å‰ªæ
- åœ¨å®¢æˆ·ç«¯é™é‡‡æ ·
- æ§åˆ¶æ¸²æŸ“è´¨é‡

---

## ğŸ“Š ä¸‰ä¸ªé¡¹ç›®å¯¹æ¯”æ€»ç»“

| é¡¹ç›® | ç›®æ ‡ | é€‚ç”¨æ€§ | å¯å€Ÿé‰´ |
|------|------|--------|--------|
| **LightGaussian** | æ¨¡å‹å‹ç¼© | âš ï¸ éœ€è¦è®­ç»ƒæ•°æ® | âœ… å‰ªææ€æƒ³ |
| **CityGaussian** | å¤§è§„æ¨¡é‡å»º | âŒ è¿‡åº¦è®¾è®¡ | âœ… prune_ratio |
| **SHARP** | å•å›¾ç”Ÿæˆ | âœ… æˆ‘ä»¬åœ¨ç”¨ | - |

---

## ğŸ¯ æœ€ç»ˆå»ºè®®

### ä¸è¦ä½¿ç”¨CityGaussian

**åŸå› **:
1. å®ƒæ˜¯é‡å»ºå·¥å…·ï¼Œä¸æ˜¯å‹ç¼©å·¥å…·
2. ä¸“ä¸ºå¤§è§„æ¨¡å¤šGPUåœºæ™¯è®¾è®¡
3. å¯¹æˆ‘ä»¬çš„å•å›¾åœºæ™¯è¿‡åº¦å¤æ‚
4. æ²¡æœ‰ç‹¬ç«‹çš„PLYå‹ç¼©åŠŸèƒ½

### ç»§ç»­ä½¿ç”¨æˆ‘ä»¬çš„ç®€åŒ–æ–¹æ¡ˆ

**åŸºäºä¸é€æ˜åº¦çš„ç®€å•å‰ªæ**:
```python
def prune_gaussians_simple(gaussians, opacity_threshold=0.1):
    mask = gaussians.opacities > opacity_threshold
    return pruned_gaussians
```

**ä¼˜åŠ¿**:
- âœ… 10è¡Œä»£ç å®ç°
- âœ… ä¸éœ€è¦è®­ç»ƒæ•°æ®
- âœ… ç«‹å³å¯ç”¨
- âœ… æ•ˆæœå¯æ§

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### æ¨èæ–¹æ¡ˆ

**ä¸è¦èŠ±æ—¶é—´åœ¨CityGaussianæˆ–LightGaussianä¸Š**

**ç›´æ¥å®æ–½æˆ‘ä»¬çš„ç®€åŒ–æ–¹æ¡ˆ**:

1. **æœåŠ¡å™¨ç«¯å‰ªæ**ï¼ˆ5åˆ†é’Ÿï¼‰
   - åŸºäºä¸é€æ˜åº¦ç§»é™¤ä½è´¡çŒ®ç‚¹
   - é¢„æœŸå‡å°‘30-50%ç‚¹äº‘

2. **å®¢æˆ·ç«¯GPUä¼˜åŒ–**ï¼ˆ5åˆ†é’Ÿï¼‰
   - å¸§ç‡é™åˆ¶60fps
   - é™ä½æ’åºé¢‘ç‡

3. **æµ‹è¯•éªŒè¯**ï¼ˆ5åˆ†é’Ÿï¼‰
   - è§‚å¯ŸGPUå ç”¨ç‡
   - æ£€æŸ¥è§†è§‰è´¨é‡

**é¢„æœŸæ•ˆæœ**:
- æ€»æ—¶é—´: 7.98ç§’ â†’ 6.5ç§’ï¼ˆâ†“19%ï¼‰
- GPUå ç”¨: 100% â†’ 35%ï¼ˆâ†“65%ï¼‰
- è´¨é‡: 95%ï¼ˆç•¥æœ‰ä¸‹é™ï¼‰

---

## ğŸ“ æŠ€æœ¯æ€»ç»“

### ä¸‰ä¸ªé¡¹ç›®çš„æ ¸å¿ƒä»·å€¼

| é¡¹ç›® | æ ¸å¿ƒä»·å€¼ | å¯¹æˆ‘ä»¬çš„å¯å‘ |
|------|---------|-------------|
| **LightGaussian** | å‰ªæç­–ç•¥ | åŸºäºä¸é€æ˜åº¦/å°ºåº¦å‰ªæ |
| **CityGaussian** | prune_ratio | å¯é…ç½®çš„å‰ªææ¯”ä¾‹ |
| **æˆ‘ä»¬çš„æ–¹æ¡ˆ** | ç®€å•æœ‰æ•ˆ | 10è¡Œä»£ç è§£å†³é—®é¢˜ |

### æœ€ç»ˆå®æ–½ä»£ç 

```python
def prune_gaussians(gaussians, opacity_threshold=0.1, prune_ratio=None):
    """
    ç®€åŒ–ç‰ˆå‰ªæ - å€Ÿé‰´LightGaussianå’ŒCityGaussianæ€æƒ³

    å‚æ•°:
    - opacity_threshold: ä¸é€æ˜åº¦é˜ˆå€¼ï¼ˆä½äºæ­¤å€¼çš„ç‚¹è¢«ç§»é™¤ï¼‰
    - prune_ratio: å¯é€‰ï¼ŒæŒ‰æ¯”ä¾‹å‰ªæï¼ˆç§»é™¤æœ€ä½çš„N%ï¼‰
    """
    opacities = gaussians.opacities.flatten()

    if prune_ratio is not None:
        # æŒ‰æ¯”ä¾‹å‰ªæï¼šç§»é™¤æœ€ä½çš„prune_ratio%
        k = int(len(opacities) * (1 - prune_ratio))
        threshold = torch.topk(opacities, k).values.min()
        mask = opacities >= threshold
    else:
        # æŒ‰é˜ˆå€¼å‰ªæ
        mask = opacities > opacity_threshold

    # åº”ç”¨mask
    pruned = Gaussians3D(
        mean_vectors=gaussians.mean_vectors[:, mask],
        singular_values=gaussians.singular_values[:, mask],
        quaternions=gaussians.quaternions[:, mask],
        colors=gaussians.colors[:, mask],
        opacities=gaussians.opacities[:, mask],
    )

    return pruned
```

---

## ğŸ¯ è¦å¼€å§‹å®æ–½å—ï¼Ÿ

æˆ‘ä¼šå®æ–½æˆ‘ä»¬çš„ç®€åŒ–å‰ªææ–¹æ¡ˆï¼Œå€Ÿé‰´LightGaussianå’ŒCityGaussiançš„æ€æƒ³ï¼Œä½†ä¸ä½¿ç”¨å®ƒä»¬çš„ä»£ç ã€‚

è¦ç»§ç»­å—ï¼ŸğŸš€
